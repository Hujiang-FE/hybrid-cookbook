### 前言

近年来随着移动设备类型的变多，操作系统的变多，用户需求的增加，对于每个项目启动前，大家都会考虑到的成本，团队成员，技术成熟度，时间，项目需求等一堆的因素。因此，开发App的方案已经变得越来越多了。曾经有一段HTML5的小浪潮，无数的人参与或者看到过一个讨论：原生开发还是混合开发，又或者是Web开发？到底最佳实践是怎样的，笔者认为只有实践过的人才会知道。尤其是在这个充满各种变数的移动互联网时代。

--- InfoQ 李秉骏 [《Hybrid App开发实战》](http://www.infoq.com/cn/articles/hybrid-app-development-combat)

我们可以注意到，文章发布的时间为2013年，距现在整整两年多时间过去了，整个无线端技术领域发生了哪些翻天覆地的变化？用户手中的设备发生了哪些变化？Hybrid方案成熟了吗？HTML5的性能表现可以满足产品需求了吗？引用中的那个讨论，现在有结论了吗？......带着这些疑问，在开始我们正式的主题之前，我们先来聊聊现状。

### 设备、系统、浏览器

作为移动端WEB开发人员，我们虽然都自带无比强大的 **KILL IE6** 光环，但是我们仍然不得不面临安卓的严重碎片化问题，各种国产内核给我们带来的心灵和肉体的伤害。咦，等等，ios呢？嗯，苹果总是能给我们带来惊喜，不是吗？但是苹果设备的retina屏幕适配，ios7的诡异表现就够让你忙活一阵的了......

我们引用腾讯2015年移动互联网用户白皮书的部分数据，以折射出一些关于设备、系统、移动端浏览器的现状：



可以看到：

1. 安卓碎片化现象仍然十分严重，乐观的是，随着安卓4.4版本(KitKat)的普及，前端开发可以大胆的引入一些实用的新特性，比如flex等，因为在KitKat版本之后，系统自带的webview已经全面升级为chromium内核。

![](屏幕快照 2015-12-09 上午10.59.40.png)

*图片数据来自 http://caniuse.com/*

2. 国产浏览器市场占有率很高，这一点值得所有前端开发者关注，因为，这意味着如果你想让你的页面在这些浏览器下表现良好，可能不得不去阅读它们官方提供的开发者文档。



3. ios端我们重点关注ios7的数据情况，因为html5在ios7上的表现一直不是很理想。

### 何时采用Hybrid架构开发

Hybrid架构是移动互联网高速迭代下的产物，在面临何时引入Hybrid的问题时，绝大多数团队都会优先考虑成本问题，那么，对比无线端纯Native的传统开发模式，Hybrid能够带来哪些直观的好处？下表如是说：

*注意：我们暂不讨论前端领域思想极为超前的ReactNative及其同类开发模式。*

| 维度/模式 | Hybrid | Native | HTML5 | 其他 |
| -- | -- | -- | -- | -- |
| 开发效率 | 由于采用混合模式开发，原生开发团队成员可以和移动端web前端开发人员共同协作开发，由于任务被分解，并行开发效率高。 | 传统原生开发模式，某些简单的页面开发不如web开发高效 | 开发速度快，上手易 | 暂不讨论 |
| 用户体验 | 由于直接获得了原生侧的某些能力，Hybrid页面的用户体验可以逼近原生体验 | 原生开发，用户体验表现极佳 | 坑多，无法获得原生侧能力，复杂场景下体验较差 | 暂不讨论 |
| 执行性能表现 | 性能表现良,但是受到webview容器本身的一些限制 | 优 | 除Hybrid侧获得原生侧的能力外，其他跟Hybrid侧表现基本一致 | 暂不讨论 | 
| 管理方式 | 由于Hybrid需要通信桥的支持，因此需要成熟的框架支持，包管理机制也需要架构设计支持，管理成本较高 | 原生侧发布模式，有严格的应用市场审核机制 | web端构建发布及管理方式都较为成熟和轻量 | 暂不讨论 |
| 成本及总结 | 开发速度快，可以保证项目迭代速度，可以很好地进行并行开发，支持hotfix，快速版本回滚，兼顾原生能力和html5的灵活 | 由于应用需要审核，某些模块的改动不得不跟随大版本一起发布，导致某些发布场景比较受限和被动，对于hotfix支持较差，甚至无支持 | 技术成本相对较低，发布速度快，可以线上hotfix，支持快速版本回滚 | 暂不讨论 |

### Let's Start

一个实际情况是：

那么，就让我们从最熟悉的容器-**浏览器**开始说起。